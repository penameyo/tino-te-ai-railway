# 💰 AWS 프리 티어로 TINO-TE.ai 운영 시 실제 비용

## 🎁 AWS 프리 티어 혜택 (12개월)

### 주요 무료 서비스
```bash
EC2 (컴퓨팅):
- t2.micro 인스턴스: 월 750시간 (24시간 × 31일 = 744시간)
- 실질적으로 1개 인스턴스 24시간 무료 ✅

RDS (데이터베이스):
- db.t2.micro: 월 750시간
- 20GB SSD 스토리지
- 2천만 I/O 작업 ✅

S3 (파일 저장):
- 5GB 표준 스토리지
- 20,000 GET 요청
- 2,000 PUT 요청 ✅

CloudFront (CDN):
- 50GB 데이터 전송
- 2백만 HTTP 요청 ✅

Application Load Balancer:
- ❌ 프리 티어 없음 (월 $16)

Lambda (서버리스):
- 1백만 요청/월
- 400,000 GB-초 컴퓨팅 시간 ✅
```

---

## 💸 TINO-TE.ai 프리 티어 비용 계산

### 시나리오: 5-10명 사용자, 월 3,000 크레딧 사용

### 1. 컴퓨팅 비용 (EC2)
```bash
백엔드 서버:
- t2.micro 인스턴스 × 1개
- 24시간 × 30일 = 720시간
- 프리 티어: 750시간 무료
비용: $0 ✅

프론트엔드:
- Vercel 무료 사용 (권장)
- 또는 S3 + CloudFront 무료
비용: $0 ✅
```

### 2. 데이터베이스 비용 (RDS)
```bash
PostgreSQL:
- db.t2.micro 인스턴스
- 20GB 스토리지 (예상 사용량: 5GB)
- 프리 티어 범위 내
비용: $0 ✅
```

### 3. 로드 밸런서 (ALB)
```bash
Application Load Balancer:
- 기본 요금: $16.20/월
- 데이터 처리: $0.008/GB (소량)
- 예상 데이터: 10GB/월 = $0.08
총 비용: $16.28 ❌ (프리 티어 없음)
```

### 4. 파일 저장 (S3)
```bash
오디오/문서 파일 저장:
- 예상 사용량: 2GB/월
- 프리 티어: 5GB 무료
- PUT 요청: 1,000회 (프리 티어: 2,000회)
비용: $0 ✅
```

### 5. CDN (CloudFront)
```bash
프론트엔드 배포:
- 데이터 전송: 5GB/월
- 프리 티어: 50GB 무료
- HTTP 요청: 100,000회 (프리 티어: 2백만회)
비용: $0 ✅
```

### 6. AI API 비용 (프리 티어 적용 안됨)
```bash
OpenAI Whisper API:
- 1,500회 × 5분 × $0.006 = $45

DeepSeek R1 API:
- Input: 3,000 × 2,000 tokens × $0.14/1M = $0.84
- Output: 3,000 × 1,000 tokens × $0.28/1M = $0.84
- 총: $1.68

AI API 총 비용: $46.68 ❌ (프리 티어 없음)
```

---

## 📊 AWS 프리 티어 총 비용 요약

| 서비스 | 프리 티어 적용 | 월 비용 |
|--------|----------------|---------|
| EC2 (백엔드) | ✅ 무료 | $0 |
| RDS (DB) | ✅ 무료 | $0 |
| S3 (파일 저장) | ✅ 무료 | $0 |
| CloudFront (CDN) | ✅ 무료 | $0 |
| ALB (로드밸런서) | ❌ 유료 | $16 |
| AI API | ❌ 유료 | $47 |
| **총 비용** | | **$63/월** |

---

## 🎯 프리 티어 최적화 전략

### 1. ALB 비용 절약 방법

#### 옵션 A: ALB 없이 직접 연결
```bash
# EC2 인스턴스에 직접 연결
프론트엔드 → http://ec2-instance-ip:8000
단점: HTTPS 설정 복잡, 도메인 연결 어려움
절약: $16/월
```

#### 옵션 B: CloudFront + EC2
```bash
# CloudFront를 프록시로 사용
프론트엔드 → CloudFront → EC2
장점: HTTPS 무료, 캐싱 효과
절약: $16/월
```

#### 옵션 C: API Gateway 사용
```bash
# API Gateway (프리 티어 있음)
- 1백만 API 호출 무료
- 소규모 트래픽에는 무료
절약: $16/월
```

### 2. 최적화된 아키텍처
```bash
프론트엔드: Vercel (무료)
백엔드: EC2 t2.micro (무료)
데이터베이스: RDS t2.micro (무료)  
파일 저장: S3 (무료)
API 게이트웨이: API Gateway (무료)
AI API: OpenAI + DeepSeek (유료)

총 비용: $47/월 (AI API만)
```

---

## 🚨 프리 티어 함정들 (주의사항)

### 1. 시간 제한 함정
```bash
# ❌ 실수하기 쉬운 것들
EC2 인스턴스 2개 실행 → 750시간 × 2 = 1,500시간 → 초과 요금
RDS 백업 활성화 → 추가 스토리지 비용
EBS 볼륨 추가 → 30GB 초과 시 요금

# ✅ 안전한 사용법
인스턴스 1개만 사용
백업 설정 주의깊게 확인
스토리지 사용량 모니터링
```

### 2. 네트워크 비용 함정
```bash
# ❌ 예상치 못한 비용
다른 리전으로 데이터 전송 → 비용 발생
NAT Gateway 사용 → 월 $45
Elastic IP 미사용 시 → 시간당 $0.005

# ✅ 비용 절약
같은 리전 내에서만 사용
NAT Gateway 대신 NAT Instance
Elastic IP 항상 인스턴스에 연결
```

### 3. 모니터링 비용
```bash
# ❌ 무료인 줄 알았는데...
CloudWatch 상세 모니터링 → 월 $2.10
CloudWatch 로그 저장 → GB당 $0.50
X-Ray 트레이싱 → 요청당 비용

# ✅ 기본 모니터링만 사용
기본 메트릭만 활용
로그 보존 기간 단축
```

---

## 📈 사용량 증가 시 비용 변화

### 사용자 10명 → 50명
```bash
EC2: t2.micro → t2.small 필요
- 프리 티어 종료 → 월 $20
RDS: 연결 수 증가로 성능 이슈
- db.t2.small 필요 → 월 $25
ALB: 트래픽 증가
- 데이터 처리 비용 증가 → 월 $20
AI API: 사용량 5배 증가
- 월 $235

총 비용: $300/월
```

### 프리 티어 종료 후 (13개월째)
```bash
모든 서비스 유료 전환:
- EC2 t2.micro: $8.5/월
- RDS db.t2.micro: $15/월  
- S3: $1/월
- ALB: $16/월
- AI API: $47/월

총 비용: $87.5/월
```

---

## 🎯 현실적인 추천 시나리오

### 시나리오 1: 완전 프리 티어 활용
```bash
구성:
- 프론트엔드: Vercel (무료)
- 백엔드: EC2 t2.micro (무료)
- DB: RDS t2.micro (무료)
- API Gateway (무료)
- AI API: $47/월

총 비용: $47/월 (61,000원)
기간: 12개월
```

### 시나리오 2: 하이브리드 (추천)
```bash
구성:
- 프론트엔드: Vercel (무료)
- 백엔드: Railway ($7/월)
- DB: Supabase (무료)
- AI API: $47/월

총 비용: $54/월 (70,000원)
장점: 설정 간단, 안정적
```

---

## 🔍 비용 모니터링 필수 설정

### 1. 빌링 알람 설정
```bash
# AWS 콘솔에서 설정
1. Billing Dashboard → Budgets
2. Create Budget → Cost Budget
3. 월 $10 예산 설정
4. 80% 도달 시 이메일 알림
5. 100% 도달 시 SMS 알림
```

### 2. 일일 비용 체크
```python
# 간단한 비용 체크 스크립트
import boto3

def check_daily_cost():
    client = boto3.client('ce')  # Cost Explorer
    response = client.get_cost_and_usage(
        TimePeriod={
            'Start': '2024-01-01',
            'End': '2024-01-31'
        },
        Granularity='DAILY',
        Metrics=['BlendedCost']
    )
    return response

# 매일 실행하여 비용 추적
```

---

## 🚀 결론 및 추천

### AWS 프리 티어 현실
- **최소 비용**: $47/월 (AI API만)
- **실제 비용**: $63/월 (ALB 포함)
- **Railway 대비**: 비슷하거나 약간 비쌈

### 추천 방향
1. **학습 목적**: AWS 프리 티어 도전해볼 만함
2. **빠른 배포**: Railway 스택이 여전히 유리
3. **장기 계획**: AWS 경험 쌓기 좋음

### 최종 판단 기준
```bash
AWS 프리 티어를 선택하세요 (✅ 해당 시):
- AWS 학습이 목적
- 인프라 경험 쌓고 싶음
- 12개월 후 계획 있음
- 복잡한 설정 괜찮음

Railway를 선택하세요 (✅ 해당 시):
- 빠른 배포가 우선
- 설정 복잡도 최소화
- 당장 서비스 런칭 목적
- 인프라보다 기능 개발 집중
```

**개인적 추천**: AWS 프리 티어로 한 번 해보세요! 학습 효과가 크고, 실제 비용도 Railway와 크게 다르지 않습니다. 다만 설정이 복잡하니 시간 여유가 있을 때 도전하시길! 😊